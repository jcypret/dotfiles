# Unix stuff
alias ll="ls -al" # display files vertically
alias mkdir="mkdir -p" # create nested directories that don't already exist
alias ln="ln -v" # use verbose when linking files
alias e="$EDITOR" # shortcut for vim
alias dzc="dz; production console" # Opens production console in the DangerZone
alias pip="pip3"
alias cat="bat"
alias top="htop"
alias lg="lazygit"

# Vim aliases
alias v="nvim"
alias vi="nvim"
alias vim="nvim"
alias :q="exit"

# Tmux
alias tml="tmux list-sessions"
alias tma="tmux -2 attach -t $1"
alias tmk="tmux kill-session -t $1"
alias mux="tmuxinator"

# Flash the local DNS cache
alias flushdns="sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder;"

# Copy public SSH key to clipboard
alias pubkey="more ~/.ssh/id_rsa.pub | pbcopy | printf '=> Public key copied to pasteboard.\n'"

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias myip="ifconfig | grep 'inet ' | grep -v 127.0.0.1 | awk '{print \$2}'"

# Useful when Rails doesn't give the port back.
# => killport 3000
killport() { lsof -ti:$1 | xargs kill -9 }

# Switch to the "Danger Zone" profile
dz() { echo -e "\033]50;SetProfile=DangerZone\a" }
# Switch to the "Default" (normal) profile
nz() { echo -e "\033]50;SetProfile=Default\a" }

# fbr - checkout git branch (including remote branches), sorted by most recent commit, limit 30 last branches
fbr() {
  local branches branch
  branches=$(git for-each-ref --count=30 --sort=-committerdate refs/heads/ --format="%(refname:short)") &&
  branch=$(echo "$branches" |
           fzf-tmux -d $(( 2 + $(wc -l <<< "$branches") )) +m) &&
  git checkout $(echo "$branch" | sed "s/.* //" | sed "s#remotes/[^/]*/##")
}

# Project directories
c() { cd ~/Code/$1; }
compctl -W ~/Code/ -/ c

desk() { cd ~/Desktop/$1; }
compctl -W ~/Desktop/ -/ desk

# Misc
alias jsnuke="npm cache clean && bower cache clean && rm -rf node_modules bower_components dist tmp && npm install && bower install"
alias pgapp="'/Applications/Postgres.app/Contents/Versions/9.5/bin'/psql"
alias path='echo $PATH | tr -s ":" "\n"'
alias nethack="telnet nethack.alt.org"

[[ -f ~/.aliases.local ]] && source ~/.aliases.local
